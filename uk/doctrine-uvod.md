Серія "Доктрина" - Вступ
========================

> id: fbd0461a-53fe-4713-8926-82e31bd1fb9b
> slug:
> 	cs: doctrine-uvod
> 	uk: seriya-doktrina-vstup
> 
> publicationDate: '2021-08-27 11:40:00'
> mainCategoryId: '818d311a-0f58-4df7-a9a4-da7d21489dd6'
> sourceContentHash: '2bc62308fcb66acda5a09ac95b5eb2c2'

Doctrine - просунута PHP-бібліотека для роботи з об'єктно-орієнтованими базами даних. Основною метою та завданням Доктрини є опис схеми бази даних за допомогою сутностей даних та маніпулювання даними повністю об'єктно-орієнтованим способом.

Ця парадигма називається ORM (Object-relational mapping), тобто [design-pattern](/design-patterns) для перетворення (обгортання) даних, що зберігаються в реляційній базі даних, в об'єкт, який можна використовувати на об'єктно-орієнтованій мові. Таким чином, для розуміння і використання Вчення необхідно знати хоча б основи [об'єктно-орієнтованого програмування](/oop).

Навіщо вивчати Вчення?
------------------------

Причин багато:

- Doctrine є найбільш поширеною ORM-базою даних, яка використовується більшістю просунутої PHP-спільноти.
- Це значно спростить дизайн вашого PHP-додатку
- Ви забезпечуєте узгоджений спосіб проектування, версій, перенесення та резервного копіювання схеми бази даних
- Ви можете [отримати багато таблиць бази даних, завантаживши пакет](https://github.com/baraja-core/shop-product) без необхідності нічого розбиратися і налаштовувати
- Зв'язки між таблицями стають реальними фізичними об'єктами
- Виходи бази даних будуть не звичайними нетипізованими масивами, а реальними фізичними об'єктами
- Ви отримуєте простий спосіб виконувати багато операцій одночасно в рамках однієї транзакції
- Ви легко підвищите безпеку і відмовостійкість додатків, просто знаючи, коли що відбувається, і що це відбувається безпечно
- Ви отримуєте легко тестуємий рівень коду і бази даних
- Ви відкриєте для себе цілу екосистему навколо Доктрини, яка елегантно вирішує багато проблем. Ви часто знайдете прості рішення складних проблем, які в іншому випадку майже неможливо легко вирішити
- Ви дізнаєтесь багато нового, знайдете нові ідеї та зможете використовувати базу даних на повну потужність
- Позбутися складних SQL-запитів. Doctrine надає користувацький інтерфейс написання запитів (DQL), який є дуже потужним
- Заявки будуть розглядатися швидше. Ви легко знайдете можливості для оптимізації додатків, скористаєтеся перевагами лінивого завантаження і знайдете вузькі місця додатків

Давня думка автора цієї статті ([Jan Barasek](https://baraja.cz)) полягає в тому, що Doctrine - це найкращий спосіб роботи з базою даних на PHP. У нього просто немає конкуренції.

З чого почати?
----------

Перш ніж почати повноцінно використовувати Вчення, необхідно підготувати відповідне середовище. Якщо ви тільки починаєте працювати з PHP або не маєте достатніх знань, найкращим вибором буде встановлення Nette Framework з пакетом розширення [Baraja Doctrine](https://github.com/baraja-core/doctrine), який автоматично інтегрує повну підтримку. Спочатку завантажте пакет через [Composer](/composer), потім встановіть розширення DI Extension і Doctrine почне працювати автоматично.

Для коректної роботи "Доктрини" необхідно підготувати порожню базу даних ("Доктрина" може працювати з існуючим проектом, але для перших кроків це недоцільно, оскільки є ризик перезаписати існуючі дані) та налаштувати з'єднання. Оскільки Doctrine є не просто бібліотекою баз даних, а надає розширений фреймворк бази даних, вам потрібно [вирішити іншу конфігурацію](/configure-connections-with-baraja-doctrine). Більшість налаштувань автоматично перезаписуються в цьому пакеті для Nette, проте в мінімальній конфігурації ваш сервер повинен підтримувати розширення `APCu Cache` або `SQLite3`.

Якщо все налаштовано правильно, то в Nette буде створено новий сервіс DI `Baraja\Doctrine\EntityManager`, який можна [інжектувати](https://doc.nette.org/cs/3.1/di-usage) в Presenter:

```php
namespace App\FrontModule\Presenters;

use Baraja\Doctrine\EntityManager;

final class HomepagePresenter extends BasePresenter
{
	#[Inject]
	public EntityManager $entityManager;
}
```

Якщо вдасться впровадити базовий сервіс EntityManager, можна починати вивчати і працювати з Доктриною.

Як діяти далі?
--------

Наступні розділи є поєднанням технологічного довідника Доктрини, багаторічного досвіду, шаблонів проектування та готових рішень. Разом ми пройдемо всі основні елементи Доктрини: від визначення власної сутності до створення фізичної схеми бази даних, роботи з інструментом керування версіями та промислового розгортання.

Я використовую "Вчення" дуже давно і вирішив у ньому тисячі справ. Ми покажемо поради та підказки, як використовувати Doctrine для оптимізації швидкості роботи бази даних та як правильно проектувати базу даних. Ви також можете використовувати Доктрину для вже існуючого проекту (якщо ви відповідаєте певним умовам), і ми покажемо вам, як це зробити.

Ця серія статей була створена для того, щоб допомогти моїм студентам у навчанні та консультуванні. Якщо Вам необхідно більш детально обговорити або пояснити певні теми, Ви можете написати мені на електронну пошту jan@barasek.com. Оскільки це досить складна технологія, всі питання будуть розглядатися як платні консультації.
