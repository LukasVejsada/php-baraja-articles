cURL в PHP - завантаження даних через URL
=========================================

> id: '0bd1aed6-460d-4b63-9afe-f5087d1c6046'
> slug:
> 	cs: curl
> 	uk: curl-v-php-zavantazennya-danih-cerez-url
> 
> perex:
> 	- Knihovna cURL je robustní PHP knihovna pro pokročilou HTTP komunikaci.
> 	- Бібліотека cURL - це надійна бібліотека PHP для розширеного HTTP-зв'язку.
> 
> publicationDate: '2020-02-15 22:14:32'
> mainCategoryId: '02d93aa8-ed83-460a-ab97-4de21118f019'
> sourceContentHash: '7c565449293cf1ce4950f309abaf04d0'

Бібліотека PHP `cURL` є гарним засобом для завантаження даних з іноземного сервера.

На основі запиту він формує HTTP-запит, який надсилає на цільовий сервер, а після завантаження містить API для (відносно) простої обробки даних.

На відміну від рідної функції `file_get_contents` (через яку ми також можемо робити HTTP-запити), вона пропонує набагато кращі можливості налаштування і завантажує сторінки/файли як справжній браузер.

> Функція `file_get_contents` внутрішньо використовує бібліотеку `cURL`, просто вона не має таких детальних налаштувань.

Визначення режиму cURL в запиті
----------------------------

Часто корисно визначити, чи був поточний запит зроблений через `cUrl` або класично в браузері.

Прямої реалізації для цього в PHP немає, але ми можемо самі написати просту функцію:

```php
function isCurl(): bool
{
    return str_contains($_SERVER['HTTP_USER_AGENT'] ?? '', 'завиток');
}
```

Якщо у вас Linux і його термінал, або ви працюєте на Mac, спробуйте цю команду:

```shell
curl https://php.baraja.cz/curl
```

Команда робить внутрішній запит до цього сайту і повертає результат.

Якщо додаток не виявив cURL-запит, то буде повернуто HTML, як якщо б запит надійшов від браузера. Однак, оскільки типи запитів визначаються, ніщо не заважає нам повернути очищену статтю "Уцінка".

Перевагою в такому випадку є набагато краще очищені дані. Користувачеві в браузері ми показуємо відформатований HTML, а роботу - тільки основний контент.

Детальне використання API в PHP
--------------------------

Якщо ви шукаєте детальну інформацію про використання cUrl, рекомендую ознайомитися з <a href="https://www.php.net/manual/en/book.curl.php">офіційною документацією</a>, яка завжди є актуальною.

Для повсякденного використання існує бібліотека <a href="https://docs.guzzlephp.org/en/stable/">**Guzzle**</a>, яка обробляє
