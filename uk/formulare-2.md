Форми, обробка форм на PHP
==========================

> id: d1871a8d-bcfe-408d-ac12-6b827633f77e
> slug:
> 	cs: formulare-2
> 	uk: formi-obrobka-form-na-php
> 
> publicationDate: '2019-08-22 20:48:46'
> mainCategoryId: a23332c0-a233-4093-abd7-85b1b00a383b
> sourceContentHash: '91f43ee06328e88a6a1058ecbf028222'

Припустимо, ми створили HTML-форму, яку відправляємо, і тепер хочемо обробити дані. Про створення HTML-форми є <a href="/formulare">окрема стаття</a>.

Отримання даних - різні способи
----------------------------

Спосіб відправки форми задається безпосередньо в HTML

Є 2 варіанти:

- **GET** - видно в адресному рядку після знаку питання
 Наприклад: `php.baraja.cz/search.php?query=formulare`.
- **POST** - Прихований (невидимий), більшість форм надсилається поштою

Потім ми повинні прочитати їх в PHP, використовуючи той самий метод.

Отримання даних від користувача і передача їх скрипту
------------------------------------------------------

Основою є HTML-форма, як її зробити можна прочитати <a href="/formulare">в окремій статті</a>.

Для початку візьмемо просту форму для введення імені користувача:

```html
<form action="welcome.php" method="GET">
   Zadejte jméno: <input type="text" name="username">
   <input type="submit" value="odeslat">
</form>
```

З'явиться текстове вікно для введення імені та натискання кнопки "Надіслати". При натисканні на кнопку вміст поля відправляється на скрипт `welcome.php`.

Тепер щодо власне обробки у файлі `welcome.php`:

```php
$username = $_GET['ім'я користувача'];

echo 'Введіть ім'я:' . $username;
```

Зверніть увагу на спеціальну змінну `$_GET`. Це **надглобальна змінна**, яка містить дані з форми і до якої можна отримати доступ як до масиву.

Проблема з цим рішенням, однак, полягає в тому, що отримані дані є **небезпечними** і подібна форма може бути легко атакована. Наприклад, потенційний зловмисник може ввести в поле замість імені код javascript, який буде записаний на сторінку і виконаний.

Тому ми завжди повинні дезінфікувати будь-які дані користувача перед тим, як виводити їх в HTML-код:

```php
$username = $_GET['ім'я користувача'] ?? 'Невідомо';

echo 'Введіть ім'я:' . htmlspecialchars($username);
```

Подальша обробка
----------------

З отриманими даними ми можемо робити все, що завгодно, і поводитися з ними, як з будь-якою звичайною змінною.

Наприклад, додати значення в два поля:

```php
echo $_GET['x'] + $_GET['y'];
```

Або зберегти у файл, базу даних, на електронну пошту, ...

Для цього корисними є наступні функції:

- <a href="/file-put-contents">file_put_contents</a> - функція збереження даних у файл
- <a href="/hashovani">MD5</a> - обчислення контрольної суми, наприклад, для паролів
- <a href="/cookies">Cookies</a> - зберегти дані в **cookies** (невеликі файли всередині веб-браузера)
