はじめてのPHPスクリプトの書き方
=================

> id: '2d6986dc-f24b-4ae5-b24c-d5bb9bf94512'
> slug:
> 	cs: prvni-script
> 	ja: hajimetenophpsukuriputono-shuki-fang
> 
> perex:
> 	- Jak napsat první PHP script? Úvod do PHP pro začátečníky.
> 	- 最初のPHPスクリプトを書くには？初心者のためのPHP入門。
> 
> publicationDate: '2020-02-16 16:26:08'
> mainCategoryId: f4a34087-1b51-4761-8128-4459dfe83d8a
> sourceContentHash: a5fab0e5edf99323140e497a6fe52322

最初の PHP スクリプトを書く前に、まず PHP を使ってどのようにページを読み込むかを理論的に説明する必要があります。

1.まず、ユーザーがWebブラウザで特定のURL、例えば`https://baraja.cz`を呼び出します。
2.そして、Webブラウザは`リクエスト`を構築する。これは、Webサーバへの特別なリクエストであり、インターネットに送信されるものである。要求されたページに関する情報、ブラウザの基本的な識別と設定、クッキーに関する情報などが含まれています。
3.この `request` はインターネットを渡ってウェブサーバ (多くの場合 `Apache`) に到達し、ウェブサーバはリクエストを読み込んで応答のコンパイルを開始します。
4.呼び出されたURLはPHPスクリプトであり、リクエストは `index.php` という名前のファイルなので、`Apache` はディスク上のルートディレクトリから `index.php` ファイルを読み込んで `PHP interpreter` に渡す。このプログラムは、PHPコード自体を処理して、それを基に `HTML コード` を構築し、ユーザに送信できるプログラムである。
5.HTMLコードがコンパイルされると、そのレスポンスがユーザーに返され（これを `response` と呼ぶ）、ウェブブラウザはあたかも純粋なHTMLであるかのように、通常の方法でページをレンダリングする。

> WebブラウザはPHPスクリプトの内容については何も学習せず、生成されたHTMLを処理するだけなので、スクリプトとサーバーのコンテンツは安全なままであることに注意してください。

最初のスクリプトを作成しましょう
----------------------------

> 最初のスクリプトを書くには、あなたのコンピュータでWebサーバーが動作していることが前提になります。Windowsでは、<a href="https://www.apachefriends.org/index.html">XAMPP</a> が最適です（PHPバージョン7.0以降をダウンロード）。<a href="https://www.apachefriends.org/index.html">XAMPP</a> はMacでもWindowsと全く同じように動作します。Linuxでは、<a href="https://wiki.ubuntu.cz/servery/apache_s_mysql_a_php">LAMPサーバー</a>をお勧めします（このサイトもLAMPサーバーで動いています）。

PHP スクリプトのファイル名は、拡張子 `.php` で終わらなければなりません。これにより、Web サーバーは PHP の規則に従ってファイルを処理したいことがわかります。そこで、例えば、ウェブサイトのメインページのコードを含む `index.php` ファイルを作成しましょう。

ファイルを開く
--------------------------

このファイルを、ソースコードを書くのに適したテキストエディタで開いてください。

Windowsでは、例えば<a href="https://www.sublimetext.com">Sublime Text</a>を使うと、構文（言語規則）をきれいに色付けして、コードを読みやすくしてくれます。後、企業で多く使われていて、複数人でプログラムできる可能性がある<a href="https://www.jetbrains.com/phpstorm/">PhpStorm</a>を購入することをお勧めします。

HTMLページの基本構造を書く
--------------------------

HTMLページの基本的な構造は、すでにご存じでしょう。

```html
<!DOCTYPE HTML>
<html>
    <head>
    <title>Můj první PHP script</title>
    <meta charset="UTF-8">
    </head>
    <body>

    </body>
</html>
```

すべてのHTMLコードは通常の方法で処理され、サイト設計の大きな助けとなります。PHPはHTMLとCSSの原理を大いに利用しています。

PHPスクリプトとHTMLコードの分離
--------------------------

PHPは主にテンプレート言語であり、コードの適切な場所にカスタムコンテンツを生成します。何がHTMLで何がPHPなのかを明確に区別できるようにするために、セパレータタグを使用する必要があるのです。

現状では、`<?php`と`?>`を使った記法を使うのがベストです。

```php
// 以下はPHPのコードです。
?>
```

> 他のHTMLコードを使用したい場合は、`?>`というターミネータを使用します。PHPスクリプトの末尾にこれ以上HTMLコードがない場合、`?>`タグを入れない方が、テキストエディタが挿入できるページ末尾の不要な空白や改行がなくなり、好ましいと思います。

過去には `<?php` の代わりに `<?` タグが多用されましたが、必ずしもサポートされるとは限りません。

ラッパータグは、ページの本文など、HTMLコードの任意の場所に配置することができます。

```html
<!DOCTYPE HTML>
<html>
    <head>
    <title>Můj první PHP script</title>
    <meta charset="UTF-8">
    </head>
    <body>
    <?php
        // tady bude PHP kód
    ?>
    </body>
</html>
```

基本構成
--------------------------

非常に基本的な構成要素の中に

- <a href="/echo">ソースコードにコンテンツを掲載する</a>。
- <a href="/variable">変数</a>。
- <a href="/if">条件</a>について

ここでは、変数を使ったソースコードへのコンテンツの簡単なリストアップを実演します。

ソースコード構築の原理
--------------------------------

すべてのコンストラクト（言語表現）、ステートメント、ファンクションはセミコロンで区切られ、現在のコンストラクトがどこからどこまで有効なのかが明確になるようになっています。

セミコロンの後には、通常、改行が入ります。

象徴的に書かれています。

```php
příkaz;
další příkaz;
proměnná x = její hodnota;

vypsat proměnnou x;

uložit do souboru;
```

ソースコードに展開する
--------------------------

<a href="/echo">エコー</a>構文は、コンテンツを一覧表示するために使用されます。

使い勝手がいいんです。

```php
echo 'ハロー、ワールド';
```

そして、HTMLコードに "Hello world!"というテキストをプリントする。サンプルをお試しください。

> その他のデモは、中にPHPのコードだけが入っています。周辺のHTMLコードは、自由に作成していただいて構いません（例えば、冒頭のサンプルを使ってください）。

変数
--------------------------

変数とは、データを格納する仮想的なメモリ上の位置で、データを移動させるために使用されます。変数名は常に `dollar` で始まり、`name` 自体が続き、その後に `value` が続きます。

> 変数の仕組みについては、<a href="/variable">変数についての別記事</a>に詳しくまとめました。

```php
$oblibeneCislo = 1024;
$jmenoAutora = 'ヤン・バラシェック';

echo $oblibeneCislo;
echo '<br>。';
echo $jmenoAutora;
```

> 変数名は、コードを明確にするために、その変数が実際に何を含んでいるかを表現する必要があります。また、テキストをインデントするために、HTMLタグ `<br>` が挿入されていることにも注目してください。このタグは、HTMLですでにおなじみのものです。

echo` 構文で出力されるものは文字列 (文字の並び) と呼ばれます。個々の文字列をピリオド(`.`)で連結して、出力を1行にすることができます。

```php
$oblibeneCislo = 1024;
$jmenoAutora = 'ヤン・バラシェック';

echo $oblibeneCislo . '<br>。' . $jmenoAutora;
```

> 文字列をドットでつなげた後、全体を1つの大きな文字列として見ることができます。

バリアブル操作
--------------------------

変数の間では、すべての基本的な<a href="/mathematics">数学的演算</a>が期待通りに完全に直感的に動作します。

2つの変数を定義して、そこに数字を入れましょう。

```php
$x = 5; // 変数 x に値 5 を定義する
$y = 3; // 変数 y を値 3 で定義します．

echo $x + $y; // 変数を追加し、8を表示する
```

> なお、等号(`=`)は数学の演算には使用しないので、例えば方程式を書くことはできません。PHPは、この点でちょうど電卓のように動作します。

変数を使いたくない場合は、直接演算を行うことができます。だから、オペレーションの場所は関係なく、どこでも評価する。

```php
echo 5 + 3; // 8を表示します。
```

また、変数を加算して、その結果を別の変数に格納することもできます。

```php
$x = 5;
$y = 3;
$z = $x + $y; // 変数 $z は 8 を含む

echo $z; // 8を表示します。
```

次回は、<a href="/principles-of-variables">変数の定義と使い方</a>の完全な基本を学びます。
